# ๐ข Shopify Dynamic Shipping Calculator

ูุธุงู ุญุณุงุจ ุดุญู ุฏููุงูููู ูู Shopify ูุฏุนู ุญุณุงุจ ุงูุชูููุฉ ุญุณุจ **ุงููุฒู** ู **ุงูุฏููุฉ** ูุน 3 ุฃููุงุน ุฎุฏูุงุช ุดุญู.

## โจ ุงููููุฒุงุช

- โ ุญุณุงุจ ุฏููุงูููู ุญุณุจ ุงููุฒู (ุชูุฑูุจ ูุฃูุฑุจ 0.5 ูุฌู)
- โ ุฏุนู **36 ุฏููุฉ** (ุฌููุน ุงูุฏูู ุงูุนุฑุจูุฉ + ุฃูุฑูุจุง + ุฃูุฑููุง)
- โ 3 ุฃููุงุน ุฎุฏูุงุช: Standard, Economy, Premium
- โ ููู ุฅุนุฏุงุฏุงุช JSON ูููุตู (ุณูู ุงูุชุนุฏูู)
- โ API endpoints ููุงุฎุชุจุงุฑ ูุงูุชุทููุฑ
- โ ูุชูุงูู ุชูุงูุงู ูุน Shopify Carrier Service

---

## ๐ ูููู ุงููุดุฑูุน

```
shopify-shipping-app/
โโโ server.js              # ุงูุณูุฑูุฑ ุงูุฑุฆูุณู
โโโ shipping-config.json   # โจ ููู ุงูุฅุนุฏุงุฏุงุช (ุนุฏูู ููุง!)
โโโ package.json
โโโ .gitignore
โโโ README.md
```

---

## ๐ ุงูุชุซุจูุช ูุงูุชุดุบูู

### 1๏ธโฃ ุงูุชุซุจูุช ุงููุญูู

```bash
# ุงุณุชูุณุงุฎ ุงููุดุฑูุน
git clone https://github.com/YOUR_USERNAME/shopify-shipping-app.git
cd shopify-shipping-app

# ุชุซุจูุช ุงูููุชุจุงุช
npm install

# ุชุดุบูู ุงูุณูุฑูุฑ
npm start
```

ุงูุณูุฑูุฑ ุณูุนูู ุนูู: `http://localhost:3000`

### 2๏ธโฃ ุงููุดุฑ ุนูู Render

1. ุฑูุน ุงูููุฏ ุฅูู GitHub
2. ุฅูุดุงุก Web Service ุนูู [render.com](https://render.com)
3. ุฑุจุท GitHub repository
4. Build Command: `npm install`
5. Start Command: `npm start`

---

## โ๏ธ ููู ุชุนุฏูู ุงูุฃุณุนุงุฑุ

### โ๏ธ ุชุนุฏูู ููู `shipping-config.json`

#### 1. ุชุนุฏูู ุณุนุฑ ุฏููุฉ ููุฌูุฏุฉ:

```json
{
  "countries": {
    "SA": {
      "name": "Saudi Arabia",
      "nameAr": "ุงูุณุนูุฏูุฉ",
      "basePrice": 15,          // โ ุนุฏูู ููุง: ุณุนุฑ ุฃูู 0.5 ูุฌู
      "pricePerHalfKg": 3,      // โ ุนุฏูู ููุง: ุณุนุฑ ูู 0.5 ูุฌู ุฅุถุงูู
      "days": "3-5"             // โ ุนุฏูู ููุง: ูุฏุฉ ุงูุชูุตูู
    }
  }
}
```

#### 2. ุฅุถุงูุฉ ุฏููุฉ ุฌุฏูุฏุฉ:

```json
{
  "countries": {
    "XX": {
      "name": "Country Name",
      "nameAr": "ุงุณู ุงูุฏููุฉ",
      "basePrice": 20,
      "pricePerHalfKg": 4,
      "days": "5-7"
    }
  }
}
```

#### 3. ุชุนุฏูู ุฃููุงุน ุงูุฎุฏูุงุช:

```json
{
  "serviceTypes": {
    "standard": {
      "name": "Standard Shipping",
      "nameAr": "ุดุญู ููุงุณู",
      "multiplier": 1.0,        // 1.0 = ุงูุณุนุฑ ุงูุฃุณุงุณู
      "code": "STD"
    },
    "economy": {
      "multiplier": 0.7         // 0.7 = ุชุฎููุถ 30%
    },
    "premium": {
      "multiplier": 2.0         // 2.0 = ุถุนู ุงูุณุนุฑ
    }
  }
}
```

**ุจุนุฏ ุงูุชุนุฏูู:**
1. ุงุญูุธ ุงูููู
2. ุงุฑูุนู ุฅูู GitHub: `git push`
3. Render ุณูุนูุฏ ุงููุดุฑ ุชููุงุฆูุงู (ุฃู ุงุถุบุท Manual Deploy)

---

## ๐ ุงูุฏูู ุงููุฏุนููุฉ (36 ุฏููุฉ)

### ๐ฆ๐ช ุฏูู ุงูุฎููุฌ
- ุงูุฅูุงุฑุงุช (AE), ุงูุณุนูุฏูุฉ (SA), ูุทุฑ (QA), ุงูุจุญุฑูู (BH), ุนููุงู (OM), ุงููููุช (KW)

### ๐ฏ๐ด ุฏูู ุงูุดุงู ูุงูุนุฑุงู
- ุงูุฃุฑุฏู (JO), ููุณุทูู (PS), ูุจูุงู (LB), ุณูุฑูุง (SY), ุงูุนุฑุงู (IQ)

### ๐ช๐ฌ ุดูุงู ุฃูุฑูููุง
- ูุตุฑ (EG), ููุจูุง (LY), ุชููุณ (TN), ุงูุฌุฒุงุฆุฑ (DZ), ุงููุบุฑุจ (MA), ููุฑูุชุงููุง (MR)

### ๐ธ๐ฉ ุฃูุฑูููุง ุงูุดุฑููุฉ
- ุงูุณูุฏุงู (SD), ุงูุตููุงู (SO), ุฌูุจูุชู (DJ), ุฌุฒุฑ ุงูููุฑ (KM), ุงูููู (YE)

### ๐น๐ท ุฏูู ุฃุฎุฑู
- ุชุฑููุง (TR), ุฅูุฑุงู (IR), ุจุงูุณุชุงู (PK), ุฅุณุฑุงุฆูู (IL)

### ๐ฌ๐ง ุฃูุฑูุจุง
- ุจุฑูุทุงููุง (GB), ูุฑูุณุง (FR), ุฃููุงููุง (DE), ููููุฏุง (NL), ุฅูุทุงููุง (IT), ุฅุณุจุงููุง (ES), ุณููุณุฑุง (CH)

### ๐บ๐ธ ุฃูุฑููุง
- ุฃูุฑููุง (US), ููุฏุง (CA)

---

## ๐ฐ ููู ูุนูู ูุธุงู ุงูุญุณุงุจุ

### ุงููุนุงุฏูุฉ:
```
ุงูุณุนุฑ ุงูููุงุฆู = (ุงูุณุนุฑ ุงูุฃุณุงุณู + ุชูููุฉ ุงููุฒู ุงูุฅุถุงูู) ร ูุนุงูู ุงูุฎุฏูุฉ
```

### ูุซุงู: 2.3 ูุฌู ุฅูู ุงูุฃุฑุฏู

1. **ุชูุฑูุจ ุงููุฒู**: 2.3 ูุฌู โ **2.5 ูุฌู**
2. **ุงูุณุนุฑ ุงูุฃุณุงุณู**: ุฃูู 0.5 ูุฌู = 15 AED
3. **ุงููุฒู ุงูุฅุถุงูู**: (2.5 - 0.5) = 2 ูุฌู = **4 ุฃูุตุงู**
4. **ุชูููุฉ ุงูุฅุถุงูู**: 4 ร 3 = **12 AED**
5. **ุงููุฌููุน**: 15 + 12 = **27 AED**
6. **ุญุณุจ ุงูุฎุฏูุฉ**:
   - Standard (ร1.0) = **27 AED**
   - Economy (ร0.8) = **21.6 AED**
   - Premium (ร1.5) = **40.5 AED**

---

## ๐งช API Endpoints ููุงุฎุชุจุงุฑ

### 1. ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
```bash
GET /
```
ูุนูููุงุช ุนู ุงููุธุงู ูุนุฏุฏ ุงูุฏูู ุงููุฏุนููุฉ

### 2. ุงุฎุชุจุงุฑ ุญุณุงุจ ุฏููุฉ ูุญุฏุฏุฉ
```bash
GET /calculate?country=SA&weight=2000&service=standard
```
**ูุซุงู ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "calculation": {
    "country": "Saudi Arabia",
    "weightInKg": 2,
    "calculatedPrice": 21,
    "priceInCents": 2100,
    "breakdown": {
      "base": 15,
      "extra": 6,
      "final": 21
    }
  }
}
```

### 3. ุนุฑุถ ุฌููุน ุงูุฏูู
```bash
GET /countries?weight=1000&service=standard
```

### 4. ุงุฎุชุจุงุฑ ุดุงูู ูุฏููุฉ
```bash
GET /test/SA
```
ูุนุฑุถ ุฃูุซูุฉ ูุฃูุฒุงู ูุฎุชููุฉ

### 5. ุนุฑุถ ุฃููุงุน ุงูุฎุฏูุงุช
```bash
GET /services
```

### 6. ุฅุนุงุฏุฉ ุชุญููู ุงูุฅุนุฏุงุฏุงุช (ููุชุทููุฑ)
```bash
POST /reload-config
```

---

## ๐ ุงูุฑุจุท ูุน Shopify

### ุงููุชุทูุจุงุช:
- Shopify Plan: Advanced ุฃู Plus
- Admin API access

### ุงูุฎุทูุงุช:

#### 1๏ธโฃ ุฅูุดุงุก Custom App

```
Shopify Admin โ Settings โ Apps and sales channels โ Develop apps
โ Create an app โ Configure Admin API scopes
โ Enable: write_shipping, read_shipping
```

#### 2๏ธโฃ ุฅูุดุงุก Carrier Service

```bash
curl -X POST \
  https://YOUR-STORE.myshopify.com/admin/api/2024-01/carrier_services.json \
  -H 'Content-Type: application/json' \
  -H 'X-Shopify-Access-Token: YOUR_ACCESS_TOKEN' \
  -d '{
    "carrier_service": {
      "name": "Dynamic Shipping Calculator",
      "callback_url": "https://your-app.onrender.com/shipping-rates",
      "service_discovery": true,
      "carrier_service_type": "api",
      "format": "json"
    }
  }'
```

#### 3๏ธโฃ ุฅุนุฏุงุฏ ุงูุดุญู ูู ุงููุชุฌุฑ

```
Settings โ Shipping and delivery โ Manage rates
โ Add rate โ Use carrier or app to calculate rates
โ Select your app
```

---

## โ๏ธ ููู ุฌุฏุงู: ุฅุนุฏุงุฏ ูุฒู ุงูููุชุฌ

ููู ูุนูู ุงููุธุงู ุจุดูู ุตุญูุญุ **ูุฌุจ ููุก ุญูู ุงููุฒู** ูู Shopify:

### ุงูุทุฑููุฉ ุงูุตุญูุญุฉ:

1. ุงูุชุญ ุงูููุชุฌ ูู Shopify
2. ูุฑูุฑ ูุฃุณูู ุฅูู **Shipping** section
3. ูู ุญูู **Weight**: ุฃุฏุฎู ุงููุฒู ุจุงููููู
   - ูุซุงู: ุฅุฐุง ูุงู ุงูููุชุฌ 250g โ ุถุน `0.25` kg
4. โ ูุนูู "This is a physical product"
5. ุงุญูุธ ุงูููุชุฌ

**ุจุฏูู ุงููุฒู**: ุงููุธุงู ุณูุณุชุฎุฏู ูุฒู ุงูุชุฑุงุถู (0.5kg)

---

## ๐ฏ ุชูุนูู Economy ู Premium

ุญุงููุงู ุงููุธุงู ูุฑุณู **Standard ููุท** ูู Shopify.

ูุชูุนูู Economy ู Premium:

1. ุงูุชุญ `server.js`
2. ุงุจุญุซ ุนู ูุฐุง ุงููุณู:
```javascript
// ๐ก ูุชูุนูู Economy ู Premiumุ ุฃุฒู ุงูุชุนููู ุนู ูุฐุง ุงููุณู:
/*
const economyCalc = calculatePrice(...);
...
*/
```
3. ุฃุฒู `/*` ู `*/`
4. ุงุญูุธ ูุงุฑูุน ุฅูู GitHub

---

## ๐ ูุซุงู ุนูู ุงูููุบ

```
๐ฆ ===== Shopify Request =====
Time: 2024-01-15T10:30:00.000Z
๐ Country: JO
๐ฆ Items received: [
  {
    "name": "ุฒูุช ุงูุฒูุชูู",
    "grams": 250,
    "quantity": 10
  }
]
๐ Calculated total weight: 2500g
โ๏ธ Total Weight: 2500g (2.5kg)
โ Calculated price: 27 AED (2700 cents)
๐ Breakdown: {
  base: 15,
  extra: 12,
  final: 27
}
๐ค Response: {
  "rates": [
    {
      "service_name": "Standard Shipping to Jordan",
      "service_code": "STD_JO",
      "total_price": "2700",
      "currency": "AED"
    }
  ]
}
==============================
```

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ุชุธูุฑ ุฃุณุนุงุฑ ุงูุดุญู

โ **ุงูุญู:**
1. ุชุญูู ูู ูุฒู ุงูููุชุฌ ูู Shopify
2. ุฑุงุฌุน Logs ูู Render
3. ุชุฃูุฏ ูู Carrier Service ููุนูู

### ุงููุดููุฉ: ุงููุฒู = 0g

โ **ุงูุญู:**
- ุงููุฃ ุญูู Weight ูู Product Settings (ููุณ Variant ููุท!)

### ุงููุดููุฉ: ุฏููุฉ ุบูุฑ ูุฏุนููุฉ

โ **ุงูุญู:**
1. ุฃุถู ุงูุฏููุฉ ูู `shipping-config.json`
2. ุงุฑูุน ุฅูู GitHub
3. Render ุณูุนูุฏ ุงููุดุฑ

---

## ๐ ููุงุญุธุงุช

- **ุงููุฒู**: ูููุฑูุจ ุฏุงุฆูุงู ูุฃุนูู 0.5 ูุฌู
- **ุงูุนููุฉ**: AED (ูููู ุชุบููุฑูุง ูู ุงูููุฏ)
- **ุฃููุงุฏ ุงูุฏูู**: ISO 3166-1 alpha-2 (ุญุฑููู)
- **Render Free Plan**: ุงูุชุทุจูู ููุงู ุจุนุฏ 15 ุฏูููุฉุ ูุณุชููุธ ูู 30 ุซุงููุฉ

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

- **Shopify Docs**: https://shopify.dev/docs/api/admin-rest/latest/resources/carrierservice
- **Render Docs**: https://render.com/docs

---

## ๐ ุงูุชุฑุฎูุต

MIT License - ููููู ุงุณุชุฎุฏุงู ูุชุนุฏูู ุงูููุฏ ุจุญุฑูุฉ

---

โญ ุฅุฐุง ุฃุนุฌุจู ุงููุดุฑูุนุ ูุง ุชูุณู ุฅุนุทุงุกู ูุฌูุฉ ุนูู GitHub!